# popularSentenceMonth
badEmployers$dt <- ymd(badEmployers$dt,tz="Asia/Taipei")
#pick_months <- badEmployers
class(badEmployers$dt)
# popularSentenceMonth
badEmployers$dt <- ymd(badEmployers$dt,tz="Asia/Taipei")
table_months <- table(months(badEmployers$dt))
pick_months <- table_months == max(table_months)
popularSentenceMonth <- months(badEmployers$dt)[pick_months]
popularSentenceMonth
badEmployers$dt <- ymd(badEmployers$dt,tz="Asia/Taipei")
table_months <- table(months(badEmployers$dt))
#pick_months <- table_months == max(table_months)
#popularSentenceMonth <- months(badEmployers$dt)[pick_months]
#popularSentenceMonth
badEmployers$dt <- ymd(badEmployers$dt,tz="Asia/Taipei")
table_months <- table(months(badEmployers$dt))
table_months
#pick_months <- table_months == max(table_months)
#popularSentenceMonth <- months(badEmployers$dt)[pick_months]
#popularSentenceMonth
badEmployers$dt <- ymd(badEmployers$dt,tz="Asia/Taipei")
table_months <- table(months(badEmployers$dt))
pick_months <- table_months == max(table_months)
pick_months
#popularSentenceMonth <- months(badEmployers$dt)[pick_months]
#popularSentenceMonth
badEmployers$dt <- ymd(badEmployers$dt,tz="Asia/Taipei")
table_months <- table(months(badEmployers$dt))
pick_months <- table_months == max(table_months)
popularSentenceMonth <- table_months[pick_months]
popularSentenceMonth
badEmployers$dt <- ymd(badEmployers$dt,tz="Asia/Taipei")
table_months <- table(months(badEmployers$dt))
pick_months <- table_months == max(table_months)
popularSentenceMonth <- names(table_months[pick_months])
popularSentenceMonth
levels_content <- levels(factor(badEmployers$lawContent))
table_lawcontent <- table(badEmployers$lawContent)
pick_max_lawcontent <- table_lawcontent == max(table_lawcontent)
most_lawcontent <- table_lawcontent[pick_max_lawcontent]
mostViolatedArticle_content <- names(most_lawcontent)
#levels_content
#pick_content <- badEmployers$law == names(mostViolatedArticle)
#mostViolatedArticle_content <- as.chabadEmployers$lawContent[pick_content]
mostViolatedArticle_content
chinese <-
factor(
table$國文,
levels=c(16:1),
ordered = T)
chinese
class(table$國文)
chinese <-
factor(
table$國文,
levels=c(16:1),
ordered = T)
chinese
chinese <-
factor(
table$國文,
ordered = T)
chinese
chinese <-
factor(
table$國文,
levels=table$級分+1,
ordered = T)
chinese
chinese <-
factor(
table$國文,
levels=table$級分+1,
ordered = T)
chinese
str(chinese)
chinese <-
factor(
table$國文,
levels=table$級分+1,
ordered = T)
chinese
chinese <-
factor(
table$國文,
labels=table$級分+1,
ordered = T)
chinese
chinese <-
factor(
table$國文,
labels=c(16:1),
ordered = T)
chinese
chinese <-
factor(
table$國文,
labels=c(16:1),
ordered = T)
chinese
str(chinese)
read_csv("https://www.dropbox.com/s/xjzg1iuuws7tcha/table.csv?dl=1") -> table
source("https://www.dropbox.com/s/5oy56om4q0857tt/student10.R?dl=1",encoding = "UTF-8")
chinese <-
factor(
table$國文,
labels=c(16:1),
ordered = T)
chinese
str(chinese)
View(table)
chinese <-
factor(
table$國文,
levels=c(16:1),
labels=c(16:1),
ordered = T)
chinese
str(chinese)
chinese <-
factor(
table$國文,
levels=table$國文,
labels=c(16:1),
ordered = T)
chinese
str(chinese)
chinese <-
factor(
table$國文,
levels=table$國文,
labels=c(16:1),
ordered = T)
chinese
fromJSON("https://data.ntpc.gov.tw/od/data/api/CB6C96C8-D514-42EA-8591-0F4447E79C91?$format=json") -> badEmployers
violatedArticles <- levels(factor(badEmployers$law))
violatedArticles
#levels_content <- levels(factor(badEmployers$lawContent))
table_lawcontent <- table(badEmployers$lawContent)
pick_max_lawcontent <- table_lawcontent == max(table_lawcontent)
most_lawcontent <- table_lawcontent[pick_max_lawcontent]
mostViolatedArticle_content <- names(most_lawcontent)
#levels_content
#pick_content <- badEmployers$law == names(mostViolatedArticle)
#mostViolatedArticle_content <- as.chabadEmployers$lawContent[pick_content]
mostViolatedArticle_content
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr)
fromJSON("https://data.ntpc.gov.tw/od/data/api/CB6C96C8-D514-42EA-8591-0F4447E79C91?$format=json") -> badEmployers
violatedArticles <- levels(factor(badEmployers$law))
violatedArticles
table_countsByArticle <- table(badEmployers$law)
table_countsByArticle
pick_max <- table_countsByArticle == max(table_countsByArticle)
mostViolatedArticle <- table_countsByArticle[pick_max]
mostViolatedArticle
#levels_content <- levels(factor(badEmployers$lawContent))
table_lawcontent <- table(badEmployers$lawContent)
pick_max_lawcontent <- table_lawcontent == max(table_lawcontent)
most_lawcontent <- table_lawcontent[pick_max_lawcontent]
mostViolatedArticle_content <- names(most_lawcontent)
#levels_content
#pick_content <- badEmployers$law == names(mostViolatedArticle)
#mostViolatedArticle_content <- as.chabadEmployers$lawContent[pick_content]
mostViolatedArticle_content
table_lawcontent <- table(badEmployers$lawContent)
pick_max_lawcontent <- table_lawcontent == max(table_lawcontent)
most_lawcontent <- table_lawcontent[pick_max_lawcontent]
mostViolatedArticle_content <- names(most_lawcontent)
mostViolatedArticle_content
badEmployers$dt <- ymd(badEmployers$dt,tz="Asia/Taipei")
table_months <- table(months(badEmployers$dt))
pick_months <- table_months == max(table_months)
popularSentenceMonth <- names(table_months[pick_months])
popularSentenceMonth
View(badEmployers)
read_csv("https://www.dropbox.com/s/xjzg1iuuws7tcha/table.csv?dl=1") -> table
source("https://www.dropbox.com/s/5oy56om4q0857tt/student10.R?dl=1",encoding = "UTF-8")
chinese <-
factor(
table$國文,
levels=table$國文,
labels=c(16:1),
ordered = T)
chinese
pick_ntpu <- stringr::str_detect(students10$志願,"北大")
ntpu_namelist <- students10$姓名[pick_ntpu]
ntpu_namelist
pick_eco <- students10$志願 == "北大經濟"
pick_chinese <- students10$國文 >= 12
pick_eng_math <- students10$英文 + students10$數學 >= 26
ntpu_eco <- students10$姓名[pick_eco & pick_chinese & pick_eng_math]
ntpu_eco
pick_eco <- students10$志願 == "北大經濟"
pick_chinese <- students10$國文 >= 12
pick_eng_math <- students10$英文 + students10$數學 >= 26
ntpu_eco <- students10$姓名[pick_eco & pick_chinese & pick_eng_math]
ntpu_eco
pick_eco <- students10$志願 == "北大經濟"
students_eco <- students10$姓名[pick_eco]
pick_congrats <- students_eco %in% namelist
congrats_name <- students_eco[pick_congrats]
congrats <- paste0(c("恭喜 "), congrats_name,c(" 同學錄取國立臺北大學經濟系"))
congrats
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr);
View(students10)
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr);
twoNames <- "有人叫他段兄，但也有有人叫他段兄弟，最常...."
str_extract_all(twoNames, "段(兄|兄弟)")
back_regex <- str_extract_all(twoNames, "段(兄|兄弟)(?!弟)")
pattern <- paste0("段(兄|兄弟)",back_regex)
str_extract_all(twoNames, pattern)
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr);
twoNames <- "有人叫他段兄，但也有有人叫他段兄弟，最常...."
str_extract_all(twoNames, "段(兄|兄弟)")
back_regex <- str_view_all(twoNames, "段(兄|兄弟)(?!弟)")
pattern <- paste0("段(兄|兄弟)",back_regex)
str_extract_all(twoNames, pattern)
back_regex <- str_view_all(twoNames, "段(兄|兄弟)(?!弟)")
pattern <- paste0("段(兄|兄弟)",back_regex)
str_extract_all(twoNames, pattern)
back_regex <- "(?!弟)"
pattern <- paste0("段(兄|兄弟)",back_regex)
str_extract_all(twoNames, pattern)
jsonlite::fromJSON("https://www.dropbox.com/s/kv0xa0spa6q5l7q/semiGodsSemiDevils.json?dl=1") -> semiGodsSemiDevils
str(semiGodsSemiDevils)
# context_picked
View(semiGodsSemiDevils)
View(semiGodsSemiDevils)
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data["section"] == "P2"
context_picked <- semiGodsSemiDevils$data["text"][pick_P2]
context_picked
#str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data["section"] == "P2"
context_picked <- semiGodsSemiDevils$data["text"][pick_P2]
context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data["section"] == "P2"
context_picked <- semiGodsSemiDevils$data["text"][pick_P2]
context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data[c("section")] == "P2"
context_picked <- semiGodsSemiDevils$data[c("text")][pick_P2]
context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data$section == "P2"
context_picked <- semiGodsSemiDevils$data$text[pick_P2]
context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data$section == "P2"
context_picked <- semiGodsSemiDevils$data$text[pick_P2]
context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data$section == "P2"
context_picked <- semiGodsSemiDevils$data$text[pick_P2]
context_picked
semiGodsSemiDevils$data$text
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data$section == "P2"
context_picked <- semiGodsSemiDevils$data$text[pick_P2]
context_picked
semiGodsSemiDevils$data
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data$section == "P2"
context_picked <- semiGodsSemiDevils$data$text[pick_P2]
context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data$section["P2"]
context_picked <- semiGodsSemiDevils$data$text[pick_P2]
context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data$section[c("P2")]
context_picked <- semiGodsSemiDevils$data$text[pick_P2]
context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data$section == "P2"
context_picked <- semiGodsSemiDevils$data$text[pick_P2]
context_picked
semiGodsSemiDevils$data$section
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data$section == "P2"
context_picked <- semiGodsSemiDevils$data$text[pick_P2]
context_picked
semiGodsSemiDevils$data[["section"]]
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data$section == "P2"
context_picked <- semiGodsSemiDevils$data$text[pick_P2]
context_picked
semiGodsSemiDevils$data["section"]
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
pick_P2 <- pick_data$section == "P2"
context_picked <- semiGodsSemiDevils$data$text[pick_P2]
context_picked
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
pick_P2 <- pick_data$section == "P2"
context_picked <- pick_data$text[pick_P2]
context_picked
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
pick_data
#pick_P2 <- pick_data$section == "P2"
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
pick_data$section
#pick_P2 <- pick_data$section == "P2"
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
pick_data["section"]
#pick_P2 <- pick_data$section == "P2"
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
pick_data[["section"]]
#pick_P2 <- pick_data$section == "P2"
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
data$section
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
pick_data$data$section
#pick_P2 <- pick_data$section == "P2"
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
pick_P2 <- pick_data$section == "P2"
pick_P2
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
pick_P2 <- pick_data$section == pick_data$section["P2"]
pick_P2
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
pick_P2 <- pick_data$section == pick_data$section[c("P2")]
pick_P2
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
pick_data$section
pick_P2 <- pick_data$section == pick_data$section[c("P2")]
pick_P2
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_data <- semiGodsSemiDevils$data
pick_data$`section`
pick_P2 <- pick_data$section == pick_data$section[c("P2")]
pick_P2
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_P2 <- pick_data$section == semiGodsSemiDevils$data$section[[1]][c("P2")]
pick_P2
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data$section == semiGodsSemiDevils$data$section[[1]][c("P2")]
pick_P2
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data[[1]]$section == semiGodsSemiDevils$data[[1]]$section[c("P2")]
pick_P2
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data[[1]]$section == "P2"
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data[[1]]$section == "P2"
pick_P2
#context_picked <- pick_data$text[pick_P2]
#context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data[[1]]$section == "P2"
context_picked <- pick_data$text[pick_P2]
context_picked
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data[[1]]$section == "P2"
context_picked <- semiGodsSemiDevils$data[[1]]$text[pick_P2]
context_picked
context_picked_split <- str_split(context_picked, "\\s\\s")
context_picked_split
context_picked_split <- str_split(context_picked, "\\s{n}")
context_picked_split <- str_split(context_picked, "\\s\\s")
context_picked_split
context_picked_split <- str_split(context_picked, "\\s\\s")
context_picked_split
str(context_picked_split)
context_picked_split <- str_split(context_picked, "\\s\\s")
#context_picked_split
str(context_picked_split)
context_picked_split <- str_split(context_picked, "\\s\\s")
context_picked_split
#str(context_picked_split)
View(context_picked_split)
View(context_picked_split)
mention_duan <- str_extract_all(context_picked_split[[1]], "段?")
mention_duan
Ids <- c("A283743192","B829103720","A10920402","C291022384")
str_view_all(Ids, "[AC]")
str_detect(Ids, "[AC]") # 偵測 出現A、C
str_extract(Ids,"[A-Z]") # 取出 A-Z的字元
mention_duan <- str_extract_all(context_picked_split[[1]], "段?[:graph:][:graph:]")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(?<=段)?[:graph:]{2,3}")
mention_duan <- str_extract_all(context_picked_split[[1]], "(?<=段)?[:graph:]")
mention_duan <- str_extract_all(context_picked_split[[1]], "(?<=段)[:graph:]{2,3}")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "段?[:graph:]{1,2}")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "^段[:graph:]{1,2}")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "^段[:graph:]+")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "段[:graph:]+")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "[段][:graph:]+")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "[段][:graph:]{1,2}")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段兄弟|段大哥|段相公|段君|姓段的小子)?")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段兄弟|段大哥|段相公|段君|姓段的小子)")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄弟|段大哥|段相公|段君|姓段的小子)")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段兄弟|段大哥|段相公|段君|姓段的小子)")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段兄弟|段大哥|段相公|段君|姓段的小子)(?!弟)")
mention_duan
View(mention_duan)
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段兄弟|段大哥|段相公|段君|姓段的小子)(?!弟)?")
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段兄弟|段大哥|段相公|段君|姓段的小子)?")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段兄弟|段大哥|段相公|段君|姓段的小子)?(?!弟)")
mention_duan
jsonlite::fromJSON("https://www.dropbox.com/s/kv0xa0spa6q5l7q/semiGodsSemiDevils.json?dl=1") -> semiGodsSemiDevils
str(semiGodsSemiDevils)
pick_P2 <- semiGodsSemiDevils$data[[1]]$section == "P2"
context_picked <- semiGodsSemiDevils$data[[1]]$text[pick_P2]
context_picked
context_picked_split <- str_split(context_picked, "\\s\\s")
context_picked_split
#str(context_picked_split)
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段兄弟|段大哥|段相公|段君|姓段的小子)(?!弟)")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段兄弟?|段大哥|段相公|段君|姓段的小子)(?!弟)")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段兄弟?|段大哥|段相公|段君|姓段的小子)")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段兄(弟?)|段大哥|段相公|段君|姓段的小子)")
mention_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄(弟?)|段大哥|段相公|段君|姓段的小子)")
mention_duan
table_duan <- table(unlist(mention_duan))
table_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段大哥|段相公|段君|姓段的小子)(?!弟)")
mention_duan
#(弟?)
table_duan <- table(unlist(mention_duan))
table_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄|段兄弟|段大哥|段相公|段君|姓段的小子)(?!弟)")
mention_duan
#(弟?)
table_duan <- table(unlist(mention_duan))
table_duan
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄(弟?)|段大哥|段相公|段君|姓段的小子)")
mention_duan
table_duan <- table(unlist(mention_duan))
table_duan
twoNames <- "有人叫他段兄，但也有有人叫他段兄弟，最常...."
str_extract_all(twoNames, "段(兄弟|兄)")
twoNames <- "有人叫他段兄，但也有有人叫他段兄弟，最常...."
str_extract_all(twoNames, "段(兄|兄弟)")
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr);
twoNames <- "有人叫他段兄，但也有有人叫他段兄弟，最常...."
str_extract_all(twoNames, "段(兄|兄弟)")
back_regex <- "(?!弟)"
pattern <- paste0("段(兄|兄弟)",back_regex)
str_extract_all(twoNames, pattern)
jsonlite::fromJSON("https://www.dropbox.com/s/kv0xa0spa6q5l7q/semiGodsSemiDevils.json?dl=1") -> semiGodsSemiDevils
pick_P2 <- semiGodsSemiDevils$data[[1]]$section == "P2"
context_picked <- semiGodsSemiDevils$data[[1]]$text[pick_P2]
context_picked
context_picked_split <- str_split(context_picked, "\\s\\s")
context_picked_split
mention_duan <- str_extract_all(context_picked_split[[1]], "(段譽|段兄(弟?)|段大哥|段相公|段君|姓段的小子)")
mention_duan
table_duan <- table(unlist(mention_duan))
table_duan
